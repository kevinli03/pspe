---
title: "Two-Way Fixed Effects Estimator"
---

```{r}
#| message: false
#| warning: false

# Packages Needed:
library(fixest)
```

The two-way fixed effects estimator is the standard estimator for DiD. The estimator with is a linear regression model specified as following:

$$
Y_{it} = \underbrace{\unit + \time}_{\text{fixed effects}} + D_{it}\att + \cov + \eps_{it}
$$

::: small
This is the estimator for panel data. In repeated cross-sections, we have to replace the unit fixed effects $\alpha_i$ with group fixed effects, group being the level on which treatment is assigned (ex. if treatment is assigned at a state level, we use state fixed effects).
:::

The fixed effects $\alpha_i$ and $\gamma_t$ are "special" intercepts. Unlike our normal intercepts in regression, these intercepts take different values depending on the unit and time.

-   Intercept $\alpha_i$ has a different value for each unit $i$.
-   Intercept $\gamma_t$ has a different value for each time period $t$.

::: small
For repeated cross section, $\gamma_t$ is the same. $\alpha_g$ will now have different values for each group $g$.
:::

```{r}
#| echo: false

data(base_did, package = "fixest")
df <- base_did
colnames(df) <- c("outcome", "covariate", "unit", "time", "post", "ever.treat")
df$treatment <- df$post*df$ever.treat
```

```{r}
#| warning: false
#| message: false
model <- feols(
  outcome ~ treatment + covariate | unit + time,
      # the | separates the main variables from the fixed effects
  data = df,
  se = "cluster")
      # we should always cluster standard errors by unit
print(model)
```

::: small
The estimate for our treatment is the ATT. In this example, it is 4.850645.
:::

Since the differences between units $i$ and time periods $t$ are included in these fixed effects intercept terms, this allows us to **account** for differences between units and differences between time periods. Along with the parallel trends assumption, our treatment $D$ should be strictly exogenous, allowing for the estimated $\att$ to be unbiased.

::: small
The unit fixed effects controls for between-unit differences. The time fixed effects controls for between-time differences. The only remaining differences are unit-time differences, or trends of units over time. Parallel trends (if met) controls for this.
:::
