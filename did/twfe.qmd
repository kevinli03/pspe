---
title: "Two-Way Fixed Effects Estimator"
---

::: small
Note: if you have staggered treatment implementation, [TWFE can produce incorrect results](twfestaggered.qmd).
:::

The two-way fixed effects estimator is the most commonly used estimator in difference-in-differences, used when we have panel data with multiple observations observed in multiple time periods. The estimator is a linear regression model specified as following:

$$
\Y = \underbrace{\unit + \time}_{\text{fixed effects}} + \blue\tau \ \D + \beta\ \cov + \eps
$$

::: small
Where covariates are control variables needed to meet the parallel trends assumption (optional).
:::

The fixed effects $\alpha_i$ and $\gamma_t$ are sort-of "special" intercepts. However, unlike our normal intercepts in regression (often notated $\beta_0$), these intercepts $\alpha_i$ and $\gamma_t$ take different values depending on the unit and time.

-   Intercept $\alpha_i$ has a different value for each unit $i$.
-   Intercept $\gamma_t$ has a different value for each time period $t$.

Essentially, what fixed effects does is that it calculates different intercepts for each unit $i$, and each time period $t$. Thus, these intercepts reflect differences on-average between different units $i$, and different time periods $t$.

Since the differences between units $i$ and time periods $t$ are included in these fixed effects intercept terms, this allows us to **account** for differences between units and differences between time periods.

::: small
Or in other words, we are essentially "controlling" for differences between units, and differences between years.
:::

By accounting for differences between units and between differences in time periods, we allow our observations to be more on a level playing field, allowing for us to calculate the causal effect.

-   For example, if we were comparing yearly GDP growth data, 2008 recession would on average have low values, and 2016 would have high values. But this difference between years might cloud the main effect of our treatment. Fixed effects would account for this.

The estimate for $\blue\tau$ is our treatment effect (ATT). This estimate is **unbiased** if the parallel trends assumption is met.

Two additional notes regarding fixed effects:

1.  We should cluster standard errors by unit.
2.  For staggered treatment (see later pages), [TWFE is flawed](twfestaggered.qmd).

<br />

To implement two-way fixed effects, we need the **fixest** package:

```{r, eval = F}
library(fixest)
```

We implement two-way fixed effects as follows:

```{r, eval = F}
model <- feols(outcome ~ treatment + covariate1 + covariate2 | unit + time,
               data = my_data,
               se = "cluster")
```
